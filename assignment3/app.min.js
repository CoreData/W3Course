"use strict";var MYAPP={};MYAPP.init={getFormattedAddress:function(c,a,b){var d=new google.maps.LatLng(c,a);b.geocode({latLng:d},function(f,e){if(e==google.maps.GeocoderStatus.OK){if(f[1]){var g=f[0].formatted_address.toString();stash.set("address",g);}else{alert("No results found");}}else{alert("Geocoder failed because: "+e);}});},initGeo:function(){stash.set("address","Halle, Germany");var b=new google.maps.Geocoder();if(navigator.geolocation){navigator.geolocation.getCurrentPosition(c,a);}else{alert("Sorry, no geolocation available.");}function a(d){alert("Error: "+d.message);}function c(d){var f=d.coords.latitude;var e=d.coords.longitude;MYAPP.init.getFormattedAddress(f,e,b);}},initStorage:function(){if(!stash.get("Identifiers")||(stash.get("Identifiers")=="")){var e=Date.parse(new Date());var c='{"headline":"Wrote my first mobile application", "body":"Today I wrote my first mobile application. It was great! I had huge amounts of fun, it was a lot easier than I expected, and I was so happy I spent the rest of the day celebrating.","time":'+e+',"address":"'+stash.get("address")+'"}';stash.set(e.toString(),c);stash.set("Identifiers",e.toString()+" ");var b=e+1000;var f='{"headline":"Wrote another mobile application", "body":"I am on such a roll with these mobile Web applications that I went crazy and wrote a second one. I am so happy I cannot stop singing at the top of my lungs. My cat seems worried that I\'ve finally lost it completely, but I don\'t care â€” it\'s mobile Web all the way from now on!","time":'+b+',"address":"'+stash.get("address")+'"}';stash.set(b.toString(),f);stash.add("Identifiers",b.toString()+" ");var d=e+2000;var a='{"headline":"Must stop writing mobile application", "body":"My fingers are sore from writing so many great mobile Web applications. I know that I should stop and take a break, but there are so many great things to do with this technology that I really don\'t know how to stop!","time":'+d+',"address":"'+stash.get("address")+'"}';stash.set(d.toString(),a);stash.add("Identifiers",d.toString());}},initView:function(){var identifiers=stash.get("Identifiers").toString().split(" ");identifiers.map(function(item){if(item.substring(0,1)=="1"){var loadedEntry=eval("("+stash.get(item)+")");MYAPP.init.writeEntry(loadedEntry);}});},writeEntry:function(a){var b="<article><h2>"+a.headline+"</h2><p>"+a.body+'</p><span id="time">'+new Date(a.time)+'</span>\t| Address: <span id="address">'+a.address+'</span>\t|\t<a href="#" class="deleter">Delete this entry</a></article>';$(".entries").append(b);}};$(document).ready(function init(){MYAPP.init.initGeo();MYAPP.init.initStorage();MYAPP.init.initView();});$(document).ready(function(){$("#entry_button").bind("click",function a(c){var b={headline:"",body:"",time:0,address:""};b.headline=$("#entry_list input[name=entry_headline]").val();b.body=$("#entry_list textarea[name=entry_body]").val();b.time=Date.parse(new Date());b.address=stash.get("address");MYAPP.init.writeEntry(b);stash.set(b.time.toString(),JSON.stringify(b));stash.add("Identifiers"," "+b.time.toString());});});$(document).ready(function deleteEntry(){$(".deleter").live("click",function a(d){var e=Date.parse($(this).prev().prev().text());stash.cut(e.toString());var c=stash.get("Identifiers");var b=jQuery.trim(c.replace(e.toString(),""));stash.set("Identifiers",b);$(this).parent().remove();});});$(document).ready(function(){$("h2").click(function(){if(!$(this).next().hasClass("change")){$(this).next().toggle("slow");$(this).next().addClass("change");$(this).parent().css("background","#a9a9a9");}else{$(this).parent().css("background","#d3d3d3");$(this).next().removeClass();$(this).next().toggle("slow");}});$("h1").click(function(){if(!$("h2").next().hasClass("change")){$("h2").next().toggle("slow");$("h2").next().addClass("change");$("h2").parent().css("background","#a9a9a9");}else{$("h2").parent().css("background","#d3d3d3");$("h2").next().removeClass();$("h2").next().toggle("slow");}});});